{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <style>
@font-face {
  font-family: iranSans;
  src: url(./font/IRANSansWeb\(FaNum\).woff);
}

*,
::before,
::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: iranSans, sans-serif;
  direction: rtl;
}

.header {
  position: relative;
  background-image: url(./image/pm-0216-med-img_5635-895-2.webp);
  background-repeat: no-repeat;
  background-size: cover;
  width: 100%;
  height: 100vh;
  transition: background 0.3s, border 0.3s, border-radius 0.3s, box-shadow 0.3s;
  margin-top: 0px;
  margin-bottom: 0px;
  padding: 80px 0px 00px 0px;
  z-index: 9;
  /* filter: blur(2px); */
}

.cover {
  height: 100%;
  width: 100%;
  top: 0;
  left: 0;
  position: absolute;
  background-color: transparent;
  background-image: linear-gradient(310deg, #01d28eb3 0%, #fefefeeb 77%);
  opacity: 1;
  transition: background 0.3s, border-radius 0.3s, opacity 0.3s;
}

.article {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 500px;
  padding: 30px 30px;
  text-align: center;
  box-shadow: 0px 0px 22px rgba(107, 107, 107, 0.1);
  border-radius: 10px;
  background-color: #ffffff99;
}

.article img {
  width: 250px;
}

.container {
  position: relative;
  max-width: 700px;
  width: 100%;
  background-color: #fff;
  padding: 25px;
  border-radius: 8px;
  box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
}

.container header {
  font-size: 1.5rem;
  color: #333;
  font-weight: 500;
  text-align: center;
  position: relative;
}

.container .form {
  margin-top: 30px;
}

.form .input-box {
  width: 100%;
  margin-top: 20px;
}

.form .input-box h3 {
  text-align: justify;
}

.input-box input:focus-visible {
  box-shadow: 0 0 8px #33333330 !important;
  border: 1px solid rgb(103, 106, 251) !important;
}

.input-box label {
  color: #333;
}

.form :where(.input-box input, .select-box) {
  position: relative;
  height: 40px;
  width: 100%;
  font-size: 0.8rem;
  background-color: transparent;
  color: #707070;
  border: 1px solid #333;
  border-radius: 6px;
  padding: 0 15px;
  margin-top: 8px;
}

.select-box select {
  background-color: transparent;
}

.form :where(.input-box input, .select-box)::-webkit-inner-spin-button {
  display: none;
  background-color: transparent;
}

.form .box-colum {
  display: flex;
  column-gap: 15px;
}

.select-box select {
  height: 100%;
  width: 100%;
  outline: none;
  border: none;
  color: #707070;
  font-size: 0.8rem;
}

.form button {
  height: 40px;
  width: 100%;
  color: #fff;
  font-size: 1rem;
  font-weight: 400;
  border: none;
  margin-top: 30px;
  cursor: pointer;
  border-radius: 6px;
  transition: all 0.2s ease;
  background-image: linear-gradient(90deg, #3b676a 3%, #0052a8 100%);
}

.form button:hover {
  background-image: linear-gradient(90deg, #66bcc2 3%, #006cdf 100%);
}

.btn-exit {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 10px;
}

.btn-exit button {
  height: 40px;
  width: 158px;
  color: #fff;
  font-size: 1rem;
  font-weight: 400;
  border: none;
  margin-top: 30px;
  cursor: pointer;
  border-radius: 6px;
  transition: all 0.2s ease;
  /* background-image: linear-gradient(90deg, #3b676a 3%, #0052a8 100%); */
}

.btn-exit button:nth-child(1) {
  background-color: #3F6B6F;
}

.btn-exit button:nth-child(2) {
  background-color: rgb(233, 52, 52);
}

.btn-exit button a {
  text-decoration: none;
  color: #fff;
}

@media screen and (max-width: 1024px) {
  .article {
    width: 100%;
    top: 50%;
    left: 50%;
  }
}

@media screen and (max-width: 480px) {
  .article {
    width: 100%;
    box-shadow: none;
    padding: 0 30px;
    background-color: transparent;
  }
  .form h3 {
    font-size: 14px;
  }
  .article h1 {
    font-size: 1.3rem;
  }
  .article img {
    margin-bottom: 0px;
  }
  .form .input-box {
    margin-top: 0;
  }
  .btn-exit {
    margin-top: 0;
  }
  .btn-exit button {
    width: 140px;
    margin: 25px 0 0px 0;
  }
  .btn-exit button a {
    font-size: 0.8rem;
  }
}

  </style>
  <body>
    <section class="header">
      <div class="cover"></div>
      <!-- <img src="./image/abstract-health-medical-science-healthcare-icon-di.jpg" alt=""> -->
      <div class="article">
        <img src="./DRDEX-logo.png" alt="logo" />
        

        {% if form.errors %}
        <div class="alert alert-danger">
            <ul>
                {% for field in form %}
                    {% for error in field.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                {% endfor %}
                {% for error in form.non_field_errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}

        <form method="POST" enctype="multipart/form-data" class="form">
            {% csrf_token %}

          <div class="input-box"></div>

          <div class="input-box"></div>

          <div class="input-box address">
            <h3>اطلاعات شخصی</h3>
            {{ form.first_name }}
            {{ form.last_name }}
            <div class="box-colum">
                {{ form.national_code }}

                {{ form.tell_phone }}
              <div class="select-box">
                    {{ form.job }}
              </div>
            </div>
          </div>

          <div class="input-box address">
            <h3>تخصص</h3>
            <div class="box-colum">


              <div class="select-box">
                {{ form.specialties }}
              </div>
            </div>
          </div>

          <div class="input-box address">
            <h3>اطلاعات بانکی</h3>
            <div class="box-colum">
                {{ form.iban }}
                {{ form.bank_card_number }}
            </div>
          </div>

          <div class="input-box address">
            <h3>آدرس</h3>
            <div class="box-colum">
              <div class="select-box">
                    {{ form.province }}

              </div>
              <div class="select-box">
                {{ form.city }}
              </div>
            </div>
            {{ form.address }}       
           </div>


           <button type="submit">ارسال اطلاعات</button>
        </form>
        <div class="btn-exit">
            <button>
              <a href="{% url 'website:index' %}">بازگشت به داشبورد</a>
            </button>
  
            <button>
              <a href="{% url 'accounts:logout' %}" >خروج</a>
            </button>
          </div>
      </div>
    </section>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript">


        $(document).ready(function() {
            // غیرفعال کردن فیلد شهر در ابتدا
            $('#id_city').prop('disabled', true);
    
            $('#id_province').change(function() {
                var url = "{% url 'accounts:load_cities' %}";
                var provinceId = $(this).val();
    
                if (provinceId) {
                    $('#id_city').prop('disabled', false);  // فعال کردن فیلد شهر
    
                    $.ajax({
                        url: url,
                        data: {
                            'province_id': provinceId
                        },
                        success: function(data) {
                            $("#id_city").html('<option value="">انتخاب شهر</option>');
                            $.each(data, function(key, value) {
                                $("#id_city").append('<option value="' + value.id + '">' + value.name + '</option>');
                            });
                        }
                    });
                } else {
                    $('#id_city').prop('disabled', true);  // در صورت عدم انتخاب استان، دوباره فیلد شهر غیرفعال شود
                    $("#id_city").html('<option value="">انتخاب شهر</option>');  // پاک کردن فیلد شهر
                }
            });
        });
    </script>
    <script>
        function previewImage(event) {
            const input = event.target;
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('profile-image').src = e.target.result;
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
        </script>

  </body>
</html>
